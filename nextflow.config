// nextflow.config

// Profile for running with test data
profiles {
    test {
        includeConfig 'conf/test.config'
    }

    docker {
        docker.enabled = true
        docker.runOptions = '-u $(id -u):$(id -g)'
    }

    singularity {
        singularity.enabled = true
        singularity.autoMounts = true
    }
    
    slurm {
        process.executor = 'slurm'
        process.queue = 'your_hpc_queue'
    }
}

// Global parameters
params {
    // Pipeline Options
    input = null
    outdir = './results'

    // Reference Genome Options (using nf-core/iGenomes)
    genome = null
    genomes_base = 's3://ngi-igenomes/igenomes'
    
    // Help message
    help = false
}

// Load base configuration and module-specific settings
includeConfig 'conf/base.config'
includeConfig 'conf/modules.config'

// Function to print help message
def helpMessage() {
    log.info"""
    =========================================
    Nextflow-Neurogenomics-Pipeline v1.0
    =========================================
    Usage:
    nextflow run <pipeline> --input samples.csv --genome GRCh38

    Required arguments:
      --input    Path to input samplesheet CSV
      --genome   Reference genome name (e.g., GRCh38)

    Optional arguments:
      --outdir   Path to output directory (default: ./results)
    """.stripIndent()
}

// Show help message
if (params.help){
    helpMessage()
    exit 0
}
